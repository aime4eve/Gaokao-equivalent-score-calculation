# 高考志愿填报助手

## 简介

本项目是一套 Python 工具集，旨在帮助高考考生进行数据驱动的志愿填报分析。它包含两个主要模块：

1.  **分数分析与概率预测 (`score_analyzer.py`)**: 根据考生的预估分数，结合历史数据，分析等效分数并预测在目标院校专业组的录取概率。
2.  **大学排名数据抓取 (`web_scraper.py`)**: 自动从网络上获取最新的中国大学排名数据，为志愿选择提供权威参考。

## 主要功能

### 1. 分数分析与概率预测

*   **单点分数查询**: 输入一个2025年的预估分数，程序会计算出其在2024年和2023年的等效分数。
*   **区间分数分析**: 输入一个中心分数和范围，批量分析该分数区间内每个分数的等效分数。
*   **录取概率预测**: 根据考生的位次，结合目标专业2024年的录取数据，使用精确的概率模型（S-Curve/Sigmoid函数）计算每个专业的录取可能性。

### 2. 网页数据抓取

*   运行 `web_scraper.py` 脚本，可自动从"软科"（`shanghairanking.cn`）网站抓取最新的中国大学排名。
*   支持自动翻页，可获取所有大学的完整排名信息。
*   抓取内容包括：排名、学校名称、省市、类型、总分和学校性质（如"双一流/985/211"）。
*   结果会自动保存为 `university_rankings_2025.csv` 文件，格式清晰，可直接用于后续分析。

## 数据来源

本工具依赖以下几个核心数据文件：

*   `3年高考位次.csv`: 包含2023、2024和（模拟的）2025年的一分一段表数据。
*   `3年高考人数变化与高校计划招生变化.csv`: 包含历年高考总人数和计划招生人数。
*   `admissions_data.csv`: 包含各高校专业组在2024年的录取分数、位次和人数等详细信息。
*   **`university_rankings_2025.csv`**: 由 `web_scraper.py` 脚本生成，包含最新的大学排名数据。

**注意**: 请确保以上 `.csv` 文件与主程序位于同一目录下。

## 如何使用

### 环境要求

*   Python 3.x
*   Pandas
*   Numpy
*   Rich
*   Playwright

可以通过以下命令安装所需依赖：

```bash
pip install pandas numpy rich playwright
python -m playwright install --with-deps
```

### 运行程序

#### 运行分数分析器
```bash
python score_analyzer.py
```
程序启动后，会提示您选择分析模式。根据提示操作即可。

#### 运行网页抓取器
```bash
python web_scraper.py
```
脚本将自动开始抓取数据，并将结果保存在 `university_rankings_2025.csv` 中。

## 算法简述

### 等效分数计算

*   **旧方法 (基于绝对位次)**: 直接使用您在2025年的位次，去往年的一分一段表中寻找最接近该位次的分数。这种方法简单直接，但没有考虑每年考生总数和招生计划的变化。
*   **新方法 (基于竞争位置百分比)**: 此方法更为科学。它首先计算您的位次在当年考生中的相对位置（`位次 / 计划招生总数`），然后用这个百分比去乘以目标年份的计划招生总数，得到一个"等效位次"，再根据此等效位次查找目标年份的对应分数。该方法能更好地反映不同年份间的竞争压力变化。

### 录取概率模型

本工具不采用简单的"位次领先就冲"的粗略判断。而是引入了一个基于S型曲线（Sigmoid函数）的概率模型。该模型将您的位次与目标专业2024年最低录取位次的差距，以及该专业的录取人数作为输入，输出一个平滑的、范围在 0% 到 100% 之间的概率值。

核心公式为 `P = 1 / (1 + exp(-k * x))`，其中：
*   `x` 是您的位次领先于最低录取位次的幅度（以录取人数为单位标准化）。
*   `k` 是一个调整系数，用于控制概率曲线的陡峭程度，使结果更具区分度。

这使得录取概率的评估更为精细和人性化。

## 打包为可执行文件

**仅支持 `score_analyzer.py`**

如果您希望在没有Python环境的电脑上运行**分数分析与概率预测**工具，可以使用 PyInstaller 进行打包。

**注意**：`web_scraper.py` 脚本因依赖 Playwright 和外部浏览器，打包过程非常复杂且不稳定，不推荐进行打包。

1.  安装 PyInstaller:
    ```bash
    pip install pyinstaller
    ```
2.  在项目根目录下运行打包命令：
    ```bash
    pyinstaller --onefile --add-data "3年高考人数变化与高校计划招生变化.csv;." --add-data "3年高考位次.csv;." --add-data "admissions_data.csv;." score_analyzer.py -n 志愿填报助手
    ```
    *   `--onefile`: 将所有内容打包成一个 `.exe` 文件。
    *   `--add-data`: 将 `csv` 数据文件包含到包中。
    *   `-n`: 指定生成的可执行文件名。

3.  打包成功后，可在 `dist` 文件夹中找到 `志愿填报助手.exe`。 
